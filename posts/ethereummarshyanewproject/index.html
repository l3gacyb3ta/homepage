<!doctype html><html lang=en><head><link rel=preconnect href=https://www.googletagmanager.com><link crossorigin rel=preconnect href=https://www.google-analytics.com><meta charset=utf-8><title>ethereum & marshy, a new project!</title><meta name=description content="So a while back I was asked by my dad, &ldquo;What does BitCoin have to do with these computer parts shortages?&#34; Well I knew the basics of the …"><link rel="shortcut icon" type=image/png href=/res/logo.png><meta name=viewport content="width=device-width,initial-scale=1"><link href="https://fonts.googleapis.com/css2?family=Inter:wght@700&family=Source+Sans+Pro:wght@400;600&family=Fira+Code:wght@400;700&display=swap" rel=stylesheet><style>:root{--light:#faf0f0;--dark:#1d1731;--navy:#29516b;--olive:#8cb6ab;--visited:#b1c9d8;--salmon:#dd7170;--gray:#4e4c4c;--lightgray:#f0f0f0;--outlinegray:#dadada;--lt-colours-light:var(--light) !important;--lt-colours-lightgray:var(--lightgray) !important;--lt-colours-dark:var(--navy) !important;--lt-colours-secondary:var(--olive) !important;--lt-colours-gray:var(--outlinegray) !important;--invert-filter:invert(0) hue-rotate(0)}h1,h2,h3,h4,ol,ul,thead{font-family:Inter;color:var(--dark)}p,ul{font-family:source sans pro,sans-serif;color:var(--gray)}pre{font-family:fira code;padding:.75em;border-radius:3px;overflow-x:scroll}code{font-family:fira code;font-size:.85em;padding:.15em .3em;border-radius:5px;background:var(--lightgray)}[saved-theme=dark]{--light:#1e1e21 !important;--dark:#fbfffe !important;--navy:#75a1bf !important;--visited:#4a575e !important;--olive:#84a59d !important;--salmon:#f58382 !important;--gray:#d4d4d4 !important;--lightgray:#292633 !important;--outlinegray:#343434 !important;--invert-filter:invert(97%) hue-rotate(190deg) grayscale(0.4) contrast(90%) brightness(1.2) !important}html{scroll-behavior:smooth}body{margin:0;height:100vh;width:100vw;overflow-x:hidden;background-color:var(--light)}.hover{color:var(--dark);text-decoration:none;opacity:.6;z-index:1;transition:200ms}.hover::after{transition:200ms;height:18px;content:"";position:absolute;background-color:var(--olive);opacity:.5;z-index:-1;width:0%;right:5px;bottom:5px}@keyframes fadeIn{0%{opacity:0}100%{opacity:1}}footer{margin-top:4em}footer>a{font-family:inter;font-weight:700;font-size:1em;color:var(--navy);padding:0 .5em 3em}#newsletter{margin:2em 0}#newsletter>input{padding:.7em 1em;border-radius:4px}#newsletter>input[type=submit]{border:none;color:var(--light);background-color:var(--navy);cursor:pointer}#newsletter>input[type=email]{background-color:var(--light);border:1px solid var(--outlinegray);-webkit-box-sizing:border-box;-moz-box-sizing:border-box;-ms-box-sizing:border-box;box-sizing:border-box}hr{width:25%;margin:4em auto;height:2px;border-radius:1px;border-width:0;color:var(--dark);background-color:var(--dark)}a[href^="/thoughts"],a[href^="/books"],a[href^="/classes"]{text-decoration:none;background-color:#afbfc955;padding:0 .2em;border-radius:3px}</style><style>#TableOfContents>ol{counter-reset:section;margin-left:0;padding-left:1.5em}#TableOfContents>ol>li{counter-increment:section}#TableOfContents>ol>li>ol{counter-reset:subsection}#TableOfContents>ol>li>ol>li{counter-increment:subsection}#TableOfContents>ol>li>ol>li::marker{content:counter(section)"." counter(subsection)"  "}#TableOfContents>ol>li::marker{content:counter(section)"  "}#TableOfContents>ol>li::marker,#TableOfContents>ol>li>ol>li::marker{font-family:Source Sans Pro;font-weight:700}.postLi{margin-bottom:1em}.postLi>.time{margin:0;margin-bottom:-1em!important;font-family:fira code;font-weight:400;font-size:.5em}.singlePost{display:flex;flex-direction:row;align-items:center;justify-content:space-between}.singlePost *{margin:.1em auto}.singlePost>.desc{flex:1}.singlePost>.desc>*{display:inline-block}header,#postTitle{display:flex;flex-direction:row;align-items:center;justify-content:space-between}nav>a{margin-left:2em}#postTitle h1{margin-right:2em}footer{margin-top:4em;text-align:center}.meta{margin-left:2em!important}#contentWrapper{margin:25px 30vw}@media all and (max-width:1200px){#contentWrapper{margin:25px 5vw}}@media all and (max-width:600px){header>nav{display:none}#postTitle{flex-direction:column;align-items:flex-start}}table{width:100%}img{width:100%;border-radius:3px;margin:1em 0}p>img+em{display:block;transform:translateY(-1em)}sup{line-height:0}.morePosts{min-height:3em}.postLink{display:inline-block}.postLink.next{float:right}</style><style>a{font-family:Inter;font-weight:700;text-decoration:none;transition:all .2s ease;color:var(--navy)}a:hover{color:var(--olive)!important}.postLink:visited{color:var(--visited)}#posts{list-style:none;padding:0;margin:0}p,tbody,li{font-family:Source Sans Pro;color:var(--gray);line-height:1.5em}input{font-family:Source Sans Pro;color:var(--gray)}h2{opacity:.85}h3{opacity:.75}blockquote{margin-left:0;border-left:3px solid var(--navy);padding-left:1em}table{padding:1.5em}td,th{padding:.1em .5em}.footnotes p{margin:.5em 0}article a{font-family:Source Sans Pro;font-weight:600;text-decoration:underline;text-decoration-color:var(--olive);text-decoration-thickness:.15em}</style><style>.chroma{color:#f8f8f2;background-color:#282a36}.chroma .lntd{vertical-align:top;padding:0;margin:0;border:0}.chroma .lntable{border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block}.chroma .hl{display:block;width:100%;background-color:#ffc}.chroma .lnt{margin-right:.4em;padding:0 .4em;color:#7f7f7f}.chroma .ln{margin-right:.4em;padding:0 .4em;color:#7f7f7f}.chroma .k{color:#ff79c6}.chroma .kc{color:#ff79c6}.chroma .kd{color:#8be9fd;font-style:italic}.chroma .kn{color:#ff79c6}.chroma .kp{color:#ff79c6}.chroma .kr{color:#ff79c6}.chroma .kt{color:#8be9fd}.chroma .na{color:#50fa7b}.chroma .nb{color:#8be9fd;font-style:italic}.chroma .nc{color:#50fa7b}.chroma .nf{color:#50fa7b}.chroma .nl{color:#8be9fd;font-style:italic}.chroma .nt{color:#ff79c6}.chroma .nv{color:#8be9fd;font-style:italic}.chroma .vc{color:#8be9fd;font-style:italic}.chroma .vg{color:#8be9fd;font-style:italic}.chroma .vi{color:#8be9fd;font-style:italic}.chroma .s{color:#f1fa8c}.chroma .sa{color:#f1fa8c}.chroma .sb{color:#f1fa8c}.chroma .sc{color:#f1fa8c}.chroma .dl{color:#f1fa8c}.chroma .sd{color:#f1fa8c}.chroma .s2{color:#f1fa8c}.chroma .se{color:#f1fa8c}.chroma .sh{color:#f1fa8c}.chroma .si{color:#f1fa8c}.chroma .sx{color:#f1fa8c}.chroma .sr{color:#f1fa8c}.chroma .s1{color:#f1fa8c}.chroma .ss{color:#f1fa8c}.chroma .m{color:#bd93f9}.chroma .mb{color:#bd93f9}.chroma .mf{color:#bd93f9}.chroma .mh{color:#bd93f9}.chroma .mi{color:#bd93f9}.chroma .il{color:#bd93f9}.chroma .mo{color:#bd93f9}.chroma .o{color:#ff79c6}.chroma .ow{color:#ff79c6}.chroma .c{color:#6272a4}.chroma .ch{color:#6272a4}.chroma .cm{color:#6272a4}.chroma .c1{color:#6272a4}.chroma .cs{color:#6272a4}.chroma .cp{color:#ff79c6}.chroma .cpf{color:#ff79c6}.chroma .gd{color:#8b080b}.chroma .ge{text-decoration:underline}.chroma .gh{font-weight:700}.chroma .gi{font-weight:700}.chroma .go{color:#44475a}.chroma .gu{font-weight:700}.chroma .gl{text-decoration:underline}.lntd:first-of-type>.chroma{padding-right:0}.chroma code{font-family:fira code!important;font-size:.85em;line-height:1em;background:0 0;padding:0}.chroma{border-radius:3px;margin:0}</style><style>.darkmode{text-align:right}.darkmode>.toggle{display:none;box-sizing:border-box}.darkmode>.toggle:checked+.toggle-button:after{left:50%}.darkmode>.toggle+.toggle-button{box-sizing:border-box;outline:0;display:inline-block;width:3em;height:1.5em;position:relative;cursor:pointer;border:2px solid var(--gray);user-select:none;padding:2px;transition:all .2s ease;border-radius:2em}.darkmode>.toggle+.toggle-button:after,.darkmode>.toggle+.toggle-button:before{position:relative;display:block;box-sizing:border-box;content:"";width:50%;height:100%}.darkmode>.toggle+.toggle-button:before{display:none}.darkmode>.toggle+.toggle-button:after{left:0;transition:all .2s ease;background:var(--gray);content:"";border-radius:1em}.darkmode #dayIcon{position:relative;width:20px;height:20px;top:-1.5px;margin:0 7px;fill:var(--gray)}.darkmode #nightIcon{position:relative;width:18px;height:18px;top:-2px;margin:0 7px;fill:var(--gray)}</style></head><body><div id=contentWrapper><header><h1><a href=/posts>raleighwi.se</a></h1><div class=darkmode><label id=toggle-label-light for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="dayIcon" viewBox="0 0 35 35" style="enable-background:new 0 0 35 35"><title>Light Mode</title><path d="M6 17.5C6 16.672 5.328 16 4.5 16h-3C.672 16 0 16.672.0 17.5S.672 19 1.5 19h3C5.328 19 6 18.328 6 17.5zM7.5 26c-.414.0-.789.168-1.061.439l-2 2C4.168 28.711 4 29.086 4 29.5 4 30.328 4.671 31 5.5 31c.414.0.789-.168 1.06-.44l2-2C8.832 28.289 9 27.914 9 27.5 9 26.672 8.329 26 7.5 26zm10-20C18.329 6 19 5.328 19 4.5v-3C19 .672 18.329.0 17.5.0S16 .672 16 1.5v3C16 5.328 16.671 6 17.5 6zm10 3c.414.0.789-.168 1.06-.439l2-2C30.832 6.289 31 5.914 31 5.5 31 4.672 30.329 4 29.5 4c-.414.0-.789.168-1.061.44l-2 2C26.168 6.711 26 7.086 26 7.5 26 8.328 26.671 9 27.5 9zM6.439 8.561C6.711 8.832 7.086 9 7.5 9 8.328 9 9 8.328 9 7.5c0-.414-.168-.789-.439-1.061l-2-2C6.289 4.168 5.914 4 5.5 4 4.672 4 4 4.672 4 5.5c0 .414.168.789.439 1.06l2 2.001zM33.5 16h-3c-.828.0-1.5.672-1.5 1.5s.672 1.5 1.5 1.5h3c.828.0 1.5-.672 1.5-1.5S34.328 16 33.5 16zM28.561 26.439C28.289 26.168 27.914 26 27.5 26c-.828.0-1.5.672-1.5 1.5.0.414.168.789.439 1.06l2 2C28.711 30.832 29.086 31 29.5 31c.828.0 1.5-.672 1.5-1.5.0-.414-.168-.789-.439-1.061l-2-2zM17.5 29c-.829.0-1.5.672-1.5 1.5v3c0 .828.671 1.5 1.5 1.5s1.5-.672 1.5-1.5v-3C19 29.672 18.329 29 17.5 29zm0-22C11.71 7 7 11.71 7 17.5S11.71 28 17.5 28 28 23.29 28 17.5 23.29 7 17.5 7zm0 18c-4.136.0-7.5-3.364-7.5-7.5s3.364-7.5 7.5-7.5 7.5 3.364 7.5 7.5S21.636 25 17.5 25z"/></svg></label><input class=toggle id=darkmode-toggle type=checkbox tabindex=-1>
<label class=toggle-button for=darkmode-toggle></label><label id=toggle-label-dark for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="nightIcon" viewBox="0 0 100 100" style="enable-background='new 0 0 100 100'"><title>Dark Mode</title><path d="M96.76 66.458c-.853-.852-2.15-1.064-3.23-.534-6.063 2.991-12.858 4.571-19.655 4.571C62.022 70.495 50.88 65.88 42.5 57.5 29.043 44.043 25.658 23.536 34.076 6.47c.532-1.08.318-2.379-.534-3.23-.851-.852-2.15-1.064-3.23-.534-4.918 2.427-9.375 5.619-13.246 9.491-9.447 9.447-14.65 22.008-14.65 35.369.0 13.36 5.203 25.921 14.65 35.368s22.008 14.65 35.368 14.65c13.361.0 25.921-5.203 35.369-14.65 3.872-3.871 7.064-8.328 9.491-13.246C97.826 68.608 97.611 67.309 96.76 66.458z"/></svg></label></div></header><article><div id=postTitle class=desc><h1>ethereum & marshy, a new project!</h1><p>written March 13, 2021 // 6 min read</p></div><aside class=mainTOC><h3>Table of Contents</h3><nav id=TableOfContents><ol><li><ol><li><a href=#code-breakdown>Code Breakdown:</a></li></ol></li></ol></nav></aside><div id=mainText><p>So a while back I was asked by my dad, <em>&ldquo;What does BitCoin have to do with these computer parts shortages?"</em> Well I knew the basics of the blockchain idea, but I didn't know the specifics. So after a bit of googling I found out and that was that. Now a few days later I saw a video in my YouTube recommended feed: &ldquo;Programming the blockchain with Ethereum!&rdquo; or something like that. I then watched it and got sucked into a rabbit hole.</p><p>After I had fallen through that, I wanted to make a smart contract. So the first thing I did was&mldr; copy an ERC20 token's code. (Life of a developer lol) That got me into tokens, so I found Uniswap and I was like <em>&ldquo;I wanna make something cool and social on the blockchain! Like Uniswap!"</em> So I started writing a little app to help with situations like paying a bill together with friends.</p><p>While I was writing the code for it at school (<em>after</em> I had done my work, don't worry), one of my friends was looking over my shoulder and asked me what I was doing. So I explained and she really wanted to draw an icon for it, so Marshy, the bill splitting dapp, was born! (The icon is a marshmellow, fyi)</p><p>The code I've written is on my <a href=https://github.com/l3gacyb3ta>GitHub</a>, and y'all are free to contribute! I'm gonna learn React to make a cool web interface using web3.js. If anyone has any tips, please contact me on my contacts page.</p><h3 id=code-breakdown>Code Breakdown:</h3><pre><code>// SPDX-License-Identifier: UNLICENSED

pragma solidity &gt;=0.7.0 &lt;0.8.0;



contract MarshyShare {

    // The owner, for refund of extra eth.

    address payable private owner;

    // Current eth locked up in the contract

    int256 balance;

    // The goal of the contract, once this is reached, it will pay out.

    int256 goal;

    // The address the goal should be payed out to.

    address payable payee;
</code></pre><p>The first bit of the code sets up the smart-contract, and gives it some properties, such as an owner, a payee, a balance, and a goal. The addresses have to be 'payable' so that we can transfer ether to them in the future.</p><pre><code>// event for EVM logging

    event OwnerSet(address indexed oldOwner, address indexed newOwner);

    event GoalFulfilled();
</code></pre><p>This sets up a bit of logging, most of which I haven't implemented yet \xf0\x9f\x98\x85.</p><pre><code>    // modifier to check if caller is owner

    modifier isOwner() {

        // If the first argument of \'require\' evaluates to \'false\', execution terminates and all

        // changes to the state and to Ether balances are reverted.

        // This used to consume all gas in old EVM versions, but not anymore.

        // It is often a good idea to use \'require\' to check if functions are called correctly.

        // As a second argument, you can also provide an explanation about what went wrong.

        require(msg.sender == owner, &quot;Caller is not owner&quot;);

        _;

    }
</code></pre><p>This sets up an important 'modifier', which can run before functions, to make sure certain functions can only be called by the owner. Nothing uses this yet, but it will come up in future Marshy versions.</p><pre><code>    function deposit() public payable {

        // adds to balance and subracts from goal

        balance = balance + int(msg.value);

        goal = goal - int(msg.value);



        // If the goal is met

        if(goal &lt;= 0) {

            // Pay the payee

            payee.transfer(uint(goal));

            // Set the new balance

            balance = balance - goal;

            // logging!

            emit GoalFulfilled();

            // transfer extra eth, if the balance is positive (should be)

            if(balance &gt; 0){

                owner.transfer(uint(balance));

            }

        }

    }
</code></pre><p>This is the big fancy deposit function! What it does is that, when ether is received, it does some math to see if the goal is met, and then pays everyone out.</p><pre><code>    // Pretty easy, just get the balance

    function getBalance() public view returns(int256 balance) {return balance;}



    // Same as above, but with the current goal

    function getGoal() public view returns(int256 _goal) {return goal;}
</code></pre><p>These two are mostly for the web dapp I have planned, so that you can get balances and the such.</p><pre><code>    // Fallback deposit functions

    fallback() external payable {balance = balance + int(msg.value);}



    receive() external payable {balance = balance + int(msg.value);}

}
</code></pre><p>This is the end, and it just makes sure any accidental transfers get logged in the balance, it doesn't yet interact with the goal or the payout logic yet, so that's for an update down the line.</p><p>The full code is below, and on my GitHub. Feel free to use it, it doesn't have a license.</p><pre><code>// SPDX-License-Identifier: UNLICENSED

pragma solidity &gt;=0.7.0 &lt;0.8.0;



contract MarshyShare {

    // The owner, for refund of extra eth.

    address payable private owner;

    // Current eth locked up in the contract

    int256 balance;

    // The goal of the contract, once this is reached, it will pay out.

    int256 goal;

    // The address the goal should be payed out to.

    address payable payee;





    // event for EVM logging

    event OwnerSet(address indexed oldOwner, address indexed newOwner);

    event GoalFulfilled();



    // modifier to check if caller is owner

    modifier isOwner() {

        // If the first argument of \'require\' evaluates to \'false\', execution terminates and all

        // changes to the state and to Ether balances are reverted.

        // This used to consume all gas in old EVM versions, but not anymore.

        // It is often a good idea to use \'require\' to check if functions are called correctly.

        // As a second argument, you can also provide an explanation about what went wrong.

        require(msg.sender == owner, &quot;Caller is not owner&quot;);

        _;

    }



    constructor(int256 toBePayed, address payable _payee) {

        // Set balance to 0

        balance = 0;

        // The owner is the sender and the payee is the _payee argument

        owner = msg.sender;

        payee = _payee;

        // setup goal

        goal = toBePayed;

    }





    function deposit() public payable {

        // adds to balance and subracts from goal

        balance = balance + int(msg.value);

        goal = goal - int(msg.value);



        // If the goal is met

        if(goal &lt;= 0) {

            // Pay the payee

            payee.transfer(uint(goal));

            // Set the new balance

            balance = balance - goal;

            // logging!

            emit GoalFulfilled();

            // transfer extra eth, if the balance is positive (should be)

            if(balance &gt; 0){

                owner.transfer(uint(balance));

            }

        }

    }



    // Pretty easy, just get the balance

    function getBalance() public view returns(int256 balance) {return balance;}



    // Same as above, but with the current goal

    function getGoal() public view returns(int256 _goal) {return goal;}



    // Fallback deposit functions

    fallback() external payable {balance = balance + int(msg.value);}



    receive() external payable {balance = balance + int(msg.value);}

}</code></pre></div><div><hr><div class=morePosts><a class=postLink href="https://raleighwi.se/posts/got-this-working-on-github-pages/?ref=footer">← Got this working on github pages!</a>
<a class="postLink next" href="https://raleighwi.se/posts/imagesmadebywritingbots/?ref=footer">Images made by writing bots? →</a></div><article><p>I'm always happy to have follow up conversations or hear your thoughts! Shoot me an email at <a href=mailto:l3gacy.b3ta@disroot.org>l3gacy.b3ta@disroot.org</a> or <a href=https://twitter.com/l3gacyb3ta>yell at me on Twitter</a>.</p><p>If you like this content and want to keep up to
date with my latest ramblings and whatever else I've found interesting on the web, you should consider subscribing to my
newsletter :) Not convinced yet? Read some <a href=/newsletters>previous issues here</a>!</p><form id=newsletter action=https://buttondown.email/api/emails/embed-subscribe/l3gacy method=post target=popupwindow onsubmit="window.open('https://buttondown.email/l3gacy','popupwindow')" class=embeddable-buttondown-form><input type=email placeholder=name@email.com name=email id=bd-email>
<input type=hidden value=1 name=embed>
<input type=submit value=Subscribe></form></article><a href=/posts>← jump back up the path ladder</a></div></article><footer><footer><p>made by Raleigh Wise.<br><a rel=license href=http://creativecommons.org/licenses/by-nc-sa/4.0/>CC by-nc-sa 4.0</a></p><a href=/>home</a>
<a href=/ramblings>ramblings</a><a href=https://github.com/l3gacyb3ta/l3gacyb3ta.github.io>source</a><a href=https://twitter.com/l3gacyb3ta>twitter</a></footer></footer></div><script>const toggleSwitch=document.querySelector('#darkmode-toggle'),userPref=window.matchMedia('(prefers-color-scheme: light)').matches?'light':'dark',currentTheme=localStorage.getItem('theme')??userPref;currentTheme&&(document.documentElement.setAttribute('saved-theme',currentTheme),currentTheme==='dark'&&(toggleSwitch.checked=!0));const switchTheme=a=>{a.target.checked?(document.documentElement.setAttribute('saved-theme','dark'),localStorage.setItem('theme','dark')):(document.documentElement.setAttribute('saved-theme','light'),localStorage.setItem('theme','light'))};toggleSwitch.addEventListener('change',switchTheme,!1)</script></body></html>